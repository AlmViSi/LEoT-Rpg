<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Гримуар: Конструктор заклинаний</title>
</head>
<body>
    <div class="container">
        <h1 id="title" style="font-family: 'Cinzel', serif; text-align: center; color: #ffd700; text-shadow: 0 0 10px #ffd700;"></h1>
        <div class="tabs" id="tabs">
            <div class="tab active" data-tab="spell-creator" draggable="true" onclick="showTab('spell-creator')" id="tab-creator"></div>
            <div class="tab" data-tab="spell-list" draggable="true" onclick="showTab('spell-list')" id="tab-list"></div>
            <div class="tab" data-tab="list-manager" draggable="true" onclick="showTab('list-manager')" id="tab-manager"></div>
        </div>

        <div id="spell-creator" class="tab-content active">
            <h2 id="creator-title"></h2>
            <form id="spell-form">
                <label for="spell-name" class="tooltip" id="label-spell-name"></label>
                <input type="text" id="spell-name" placeholder="">

                <label for="spell-type-container" class="tooltip" id="label-spell-type"></label>
                <div id="spell-type-container">
                    </div>

                <label for="power-set-container" class="tooltip" id="label-power-set"></label>
                <div id="power-set-container">
                    </div>

                <label for="power-set-tree-container" class="tooltip" id="label-power-set-tree"></label>
                <div id="power-set-tree-container">
                    </div>

                <label for="level-container" class="tooltip" id="label-level"></label>
                <div id="level-container">
                    </div>

                <label for="description" class="tooltip" id="label-description"></label>
                <textarea id="description" rows="4" placeholder=""></textarea>

                <label for="action-container" class="tooltip" id="label-action"></label>
                <div id="action-container">
                    </div>

                <label for="target-container" class="tooltip" id="label-target"></label>
                <div id="target-container">
                    </div>

                <label for="range-container" class="tooltip" id="label-range"></label>
                <div id="range-container">
                    </div>

                <label for="duration-container" class="tooltip" id="label-duration"></label>
                <div id="duration-container">
                    </div>

                <label for="effect" class="tooltip" id="label-effect"></label>
                <textarea id="effect" rows="4" placeholder=""></textarea>

                <label for="cooldown-container" class="tooltip" id="label-cooldown"></label>
                <div id="cooldown-container">
                    </div>

                <label for="cost-container" class="tooltip" id="label-cost"></label>
                <div id="cost-container">
                    </div>

                <label for="defense-container" class="tooltip" id="label-defense"></label>
                <div id="defense-container">
                    </div>

                <label for="attack-container" class="tooltip" id="label-attack"></label>
                <div id="attack-container">
                    </div>

                <label for="restrictions-container" class="tooltip" id="label-restrictions"></label>
                <div id="restrictions-container">
                    </div>

                <label for="upgrades-container" class="tooltip" id="label-upgrades"></label>
                <div id="upgrades-container">
                    </div>

                <div class="button-group">
                    <button type="button" onclick="saveSpell()" id="save-spell" class="tooltip" data-tooltip="Ctrl+S"></button>
                    <button type="button" onclick="loadSpell()" id="load-spell" class="tooltip" data-tooltip="Ctrl+L"></button>
                    <button type="button" onclick="clearForm()" id="clear-form" class="tooltip" data-tooltip="Ctrl+R"></button>
                </div>
            </form>
        </div>
		
		<div id="spell-tooltip" class="tooltip-spell"></div>

        <div id="spell-list" class="tab-content">
            <h2 id="list-title"></h2>
            <div class="filter-container">
                <div class="autocomplete">
                    <input type="text" id="filter-name" placeholder="" oninput="updateAutocomplete()">
                    <div id="autocomplete-list" class="autocomplete-list" style="display: none;"></div>
                </div>
                <select id="filter-power-set" onchange="updateFilterPowerSetTree()"></select>
                <select id="filter-power-set-tree"></select>
                <select id="filter-type"></select>
            </div>
            <table class="spell-table">
                <thead>
                    <tr>
                        <th id="table-name"></th>
                        <th id="table-power-set"></th>
                        <th id="table-power-set-tree"></th>
                        <th id="table-type"></th>
                        <th id="table-action"></th>
                    </tr>
                </thead>
                <tbody id="spell-table-body"></tbody>
            </table>
        </div>

        <div id="list-manager" class="tab-content">
            <h2 id="manager-title"></h2>
            <div class="list-manager">
                <label for="manager-list-type" id="label-manager-list-type">Select List to Manage:</label>
                <select id="manager-list-type" onchange="showManagedList()">
                    <option value="">-- Select --</option>
                    <option value="type">Type</option>
                    <option value="powerSets">Power Set & Tree</option>
                    <option value="action">Action</option>
                    <option value="target">Target</option>
                    <option value="range">Range/Radius</option>
                    <option value="duration">Duration</option>
                    <option value="cooldown">Cooldown</option>
                    <option value="cost">Cost</option>
                    <option value="defense">Defense</option>
                    <option value="attack">Attack</option>
                </select>

                <div id="manager-type-section" style="display: none;">
                    <h3 id="manager-type"></h3>
                    <div class="input-group">
                        <input type="text" id="new-type" placeholder="">
                        <button onclick="addListItem('type', 'new-type')" id="add-type"></button>
                    </div>
                    <div id="type-list"></div>
                </div>

                <div id="manager-powerSets-section" style="display: none;">
                    <h3 id="manager-power-set"></h3>
                    <div class="input-group">
                        <input type="text" id="new-power-set" placeholder="">
                        <button onclick="addPowerSet()" id="add-power-set"></button>
                    </div>
                    <div id="power-set-list"></div>

                    <h3 id="manager-power-set-tree"></h3>
                    <label for="power-set-select" id="label-power-set-select"></label>
                    <div class="input-group">
                        <select id="power-set-select" onchange="loadPowerSetTreeForEdit()"></select>
                        <input type="text" id="new-power-set-tree" placeholder="">
                        <button onclick="addPowerSetTree()" id="add-power-set-tree"></button>
                    </div>
                    <div id="power-set-tree-list"></div>
                </div>

                <div id="manager-action-section" style="display: none;">
                    <h3 id="manager-action"></h3>
                    <div class="input-group">
                        <input type="text" id="new-action" placeholder="">
                        <button onclick="addListItem('action', 'new-action')" id="add-action"></button>
                    </div>
                    <div id="action-list"></div>
                </div>

                <div id="manager-target-section" style="display: none;">
                    <h3 id="manager-target"></h3>
                    <div class="input-group">
                        <input type="text" id="new-target" placeholder="">
                        <button onclick="addListItem('target', 'new-target')" id="add-target"></button>
                    </div>
                    <div id="target-list"></div>
                </div>

                <div id="manager-range-section" style="display: none;">
                    <h3 id="manager-range"></h3>
                    <div class="input-group">
                        <input type="text" id="new-range" placeholder="">
                        <button onclick="addListItem('range', 'new-range')" id="add-range"></button>
                    </div>
                    <div id="range-list"></div>
                </div>

                <div id="manager-duration-section" style="display: none;">
                    <h3 id="manager-duration"></h3>
                    <div class="input-group">
                        <input type="text" id="new-duration" placeholder="">
                        <button onclick="addListItem('duration', 'new-duration')" id="add-duration"></button>
                    </div>
                    <div id="duration-list"></div>
                </div>

                <div id="manager-cooldown-section" style="display: none;">
                    <h3 id="manager-cooldown"></h3>
                    <div class="input-group">
                        <input type="text" id="new-cooldown" placeholder="">
                        <button onclick="addListItem('cooldown', 'new-cooldown')" id="add-cooldown"></button>
                    </div>
                    <div id="cooldown-list"></div>
                </div>

                <div id="manager-cost-section" style="display: none;">
                    <h3 id="manager-cost"></h3>
                    <div class="input-group">
                        <input type="text" id="new-cost" placeholder="">
                        <button onclick="addListItem('cost', 'new-cost')" id="add-cost"></button>
                    </div>
                    <div id="cost-list"></div>
                </div>

                <div id="manager-defense-section" style="display: none;">
                    <h3 id="manager-defense"></h3>
                    <div class="input-group">
                        <input type="text" id="new-defense" placeholder="">
                        <button onclick="addListItem('defense', 'new-defense')" id="add-defense"></button>
                    </div>
                    <div id="defense-list"></div>
                </div>

                <div id="manager-attack-section" style="display: none;">
                    <h3 id="manager-attack"></h3>
                    <div class="input-group">
                        <input type="text" id="new-attack" placeholder="">
                        <button onclick="addListItem('attack', 'new-attack')" id="add-attack"></button>
                    </div>
                    <div id="attack-list"></div>
                </div>


                <div class="data-controls">
                    <button onclick="exportData()" class="tooltip" data-tooltip="Export all data to JSON file" id="export-data"></button>
                    <input type="file" id="import-data-file" accept=".json" style="display: none;" onchange="importData(event)">
                    <button onclick="document.getElementById('import-data-file').click()" class="tooltip" data-tooltip="Import data from JSON file" id="import-data"></button>
                </div>
            </div>
        </div>

        <div id="spell-modal" class="modal">
            <div id="modal-content" class="modal-content"></div>
        </div>
    </div>
    <script src="scripts/particles.js"></script>
    <script src="scripts/powersets.js"></script>
</body>
</html>